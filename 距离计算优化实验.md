实验一：

前缀匹配算法计算结果的优化效率：（10位长度）

1. 响应速度
2. gas消耗
3. 计算结果是否相同

实验步骤：

在智能合约实现普通距离计算和前缀匹配计算

测试2km、4km、6km、8km、......、20km的距离计算，测1000次取平均值



距离采用10位GeoHash进行计算

call函数返回不了gas消耗的情况，利用gasleft()在智能合约内部实现gas消耗的计算

前缀优化实验的自动化测试代码已完成

```
//前缀优化，区块链环境
records:  [
  {
    distanceScale: 2000,
    aveGas: 432160,
    aveTime: 3.826,
    aveDistance: 1999.8486141396543
  },
  {
    distanceScale: 4000,
    aveGas: 550370,
    aveTime: 4.321,
    aveDistance: 4001.8135830126416
  },
  {
    distanceScale: 6000,
    aveGas: 570926,
    aveTime: 4.258,
    aveDistance: 6000.153360652799
  },
  {
    distanceScale: 8000,
    aveGas: 492594,
    aveTime: 3.944,
    aveDistance: 7999.469003177946
  },
  {
    distanceScale: 10000,
    aveGas: 558900,
    aveTime: 4.305,
    aveDistance: 10000.44161137998
  },
  {
    distanceScale: 12000,
    aveGas: 597714,
    aveTime: 4.354,
    aveDistance: 12001.845272608596
  },
  {
    distanceScale: 14000,
    aveGas: 554332,
    aveTime: 4.152,
    aveDistance: 14000.596874942472
  },
  {
    distanceScale: 16000,
    aveGas: 643450,
    aveTime: 4.465,
    aveDistance: 15999.397963911197
  },
  {
    distanceScale: 18000,
    aveGas: 597756,
    aveTime: 4.223,
    aveDistance: 18001.145942278552
  },
  {
    distanceScale: 20000,
    aveGas: 593188,
    aveTime: 4.199,
    aveDistance: 20001.20161836259
  }
]
```



```
//无前缀优化，区块链环境
records:  [
  {
    distanceScale: 2000,
    aveGas: 954728,
    aveTime: 6.133,
    aveDistance: 1999.8486141396543
  },
  {
    distanceScale: 4000,
    aveGas: 954742,
    aveTime: 6.14,
    aveDistance: 4001.8135830126416
  },
  {
    distanceScale: 6000,
    aveGas: 975298,
    aveTime: 6.116,
    aveDistance: 6000.153360652799
  },
  {
    distanceScale: 8000,
    aveGas: 819902,
    aveTime: 5.33,
    aveDistance: 7999.469003177946
  },
  {
    distanceScale: 10000,
    aveGas: 886208,
    aveTime: 5.594,
    aveDistance: 10000.44161137998
  },
  {
    distanceScale: 12000,
    aveGas: 925022,
    aveTime: 5.963,
    aveDistance: 12001.845272608596
  },
  {
    distanceScale: 14000,
    aveGas: 881640,
    aveTime: 5.598,
    aveDistance: 14000.596874942472
  },
  {
    distanceScale: 16000,
    aveGas: 970758,
    aveTime: 5.963,
    aveDistance: 15999.397963911197
  },
  {
    distanceScale: 18000,
    aveGas: 925064,
    aveTime: 5.783,
    aveDistance: 18001.145942278552
  },
  {
    distanceScale: 20000,
    aveGas: 920496,
    aveTime: 5.689,
    aveDistance: 20001.20161836259
  }
]
```



```
//前缀优化，区块链环境
records:  [
  {
    distanceScale: 2km,
    aveGas: 432160,
    aveTime: 3.941,
    aveDistance: 1999.8486141396543
  },
  {
    distanceScale: 20km,
    aveGas: 593188,
    aveTime: 4.716,
    aveDistance: 20001.20161836259
  },
  {
    distanceScale: 50km,
    aveGas: 615320,
    aveTime: 4.71,
    aveDistance: 50131.88414013138
  },
  {
    distanceScale: 100km,
    aveGas: 619940,
    aveTime: 4.518,
    aveDistance: 99008.55263416468
  },
  {
    distanceScale: 150km,
    aveGas: 622158,
    aveTime: 4.839,
    aveDistance: 153319.01822553767
  },
  {
    distanceScale: 200km,
    aveGas: 656470,
    aveTime: 5.309,
    aveDistance: 202197.16085230376
  },
  {
    distanceScale: 300km,
    aveGas: 603928,
    aveTime: 4.619,
    aveDistance: 301769.8915047302
  },
  {
    distanceScale: 400km,
    aveGas: 645040,
    aveTime: 4.608,
    aveDistance: 400431.5518141399
  },
  {
    distanceScale: 600km,
    aveGas: 683910,
    aveTime: 4.723,
    aveDistance: 604100.0865083536
  },
  {
    distanceScale: 1000km,
    aveGas: 767840,
    aveTime: 5.049,
    aveDistance: 1007793.3422708587
  }
]
```



```
//无前缀优化
records:  [
  {
    distanceScale: 2km,
    aveGas: 954728,
    aveTime: 6.428,
    aveDistance: 1999.8486141396543
  },
  {
    distanceScale: 20km,
    aveGas: 920496,
    aveTime: 6.173,
    aveDistance: 20001.20161836259
  },
  {
    distanceScale: 50km,
    aveGas: 906712,
    aveTime: 5.988,
    aveDistance: 50131.88414013138
  },
  {
    distanceScale: 100km,
    aveGas: 911332,
    aveTime: 5.767,
    aveDistance: 99008.55263416468
  },
  {
    distanceScale: 150km,
    aveGas: 913550,
    aveTime: 5.785,
    aveDistance: 153319.01822553767
  },
  {
    distanceScale: 200km,
    aveGas: 947862,
    aveTime: 5.864,
    aveDistance: 202197.16085230376
  },
  {
    distanceScale: 300km,
    aveGas: 895320,
    aveTime: 5.699,
    aveDistance: 301769.8915047302
  },
  {
    distanceScale: 400km,
    aveGas: 936432,
    aveTime: 5.888,
    aveDistance: 400431.5518141399
  },
  {
    distanceScale: 600km,
    aveGas: 975302,
    aveTime: 5.916,
    aveDistance: 604100.0865083536
  },
  {
    distanceScale: 1000km,
    aveGas: 909052,
    aveTime: 5.671,
    aveDistance: 1007793.3422708587
  }
]
```



2km、20km、50km、100km、150km、200km、300km、400km、600km、1000km



![image-20220404085614860](实验部分记录文档.assets/image-20220404085614860.png)



![image-20220404085625086](实验部分记录文档.assets/image-20220404085625086.png)



结论：

1. 前缀匹配算法会带来运算效率的优化，在响应时间和gas消耗方面均有体现
2. 原算法GeoHash计算距离的速度与两点之间距离的大小不直接相关
3. 两点之间的GeoHash前缀相同的位数会影响前缀匹配算法的速度，相同的前缀越长，优化计算的效果越明显
4. 优化后的距离计算方法，在两点间距离巨幅增大时，算法的开销会有所上升，这是因为距离的增大导致两点相同的前缀变短，需要进行计算的部分变多，从而增加了开销，但总体速度还是优于原距离计算方法
5. 可以改变相同前缀的长度再次进行实验，验证优化前后的关系





实验二：







（前缀匹配算法对整个导航算法的优化？）

吴玥仪：

第四章：

1. 测试方法：车辆匀速行驶，以相同时间间隔更新位置信息，邻居车辆点不进行动态轨迹模拟
2. 参数设计与分析：
   1. 时间衰减参数：在均匀分布或密集分布，在不同的验证成功率，不同的时间衰减参数的表现
   2. 位置验证的信誉计算参数：验证失败的惩罚力度应该更大
   3. 消息传播的信誉计算参数：5个单位距离内的车辆，其中2个单位距离内的车辆为中心车辆，γ太大的话数据波动较大，γ取0.2

第五章： 原型系统综合测试

模拟测试和真实数据测试，取真实数据的片段说明信誉值算法的特点：

1. 能根据历史数据平滑信誉值
2. 能根据消息传播调整信誉值
3. 对恶意的失败车辆惩罚力度较大，说明高信誉值更可靠





13：30——14：00整理实验文档

14：30——15：30实现实验代码，做一组实验

自己做的数据收集工作，尝试分析

参考别人的实验做的数据收集工作，在前人分析的基础上添加描述



实验二：

区域调度的范围选择实验（对比五位和六位GeoHash的调度结果，说明选择六位GeoHash算法的合理性）



实验三：

区域调度的性能实验（区域调度的响应性能比传统区块链更好）



实验四：

不同节点数目下的响应时间，多大区域设置一个节点比较好



实验五：

系统响应高峰或者低峰出行的运行状态



实验六：

乘客数目占优或者车辆数目占优时系统的运行状态

